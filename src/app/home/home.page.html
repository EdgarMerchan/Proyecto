<ion-header [translucent]="true">
  <ion-toolbar [style.--background]="colorActual">
    <ion-buttons slot="start">
      <ion-menu-button color="light"></ion-menu-button>
    </ion-buttons>
    <ion-title style="color: white; font-weight: 600;">
      Mis Álbumes
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="container" [style.--color-actual]="colorActual">
    
    <!-- Botones de control -->
    <div class="controls">
      <ion-button (click)="cambiarColor()" expand="block">
         Cambiar Tema
      </ion-button>
      <ion-button (click)="irAIntro()" expand="block">
         Ver Intro
      </ion-button>
    </div>

    <!-- Título de sección -->
    <div class="section-header">
      <h1>Explora los Álbumes</h1>
      <p>Haz clic en cualquier álbum para ver sus canciones</p>
    </div>

    <!-- Swiper con Álbumes -->
    <swiper-container
      *ngIf="albums && albums.length > 0"
      [style.--swiper-theme-color]="'#ffffff'"
      class="albumsSwiper"
      effect="coverflow"
      grab-cursor="true"
      centered-slides="true"
      slides-per-view="auto"
      coverflow-effect-rotate="50"
      coverflow-effect-stretch="0"
      coverflow-effect-depth="100"
      coverflow-effect-modifier="1"
      coverflow-effect-slide-shadows="true"
      pagination="true"
      pagination-clickable="true">
      
      <swiper-slide *ngFor="let album of albums" (click)="showSongsByAlbum(album.id, album.name)">
        <div class="album-card">
          <div class="album-image-container">
            <img [src]="album.image" [alt]="album.name" class="album-image" />
          </div>
          <div class="album-info">
            <h2 class="album-name">{{ album.name }}</h2>
            <p class="album-details">
              <span class="track-count"> {{ album.total_tracks }} canciones</span>
              <span class="album-year"> {{ album.release_date | date: 'yyyy' }}</span>
            </p>
            <div class="genre-tags">
              <span class="genre-tag" *ngFor="let genre of album.genres">{{ genre }}</span>
            </div>
          </div>
        </div>
      </swiper-slide>
      
    </swiper-container>

    <div *ngIf="!albums || albums.length === 0" class="loading">
      <div class="spinner"></div>
      <p>Cargando álbumes...</p>
    </div>
  </div>
</ion-content>

<!-- Pie de pagina del reproductor de musica -->
<ion-footer *ngIf="currentSong" class="music-player-footer">
  <div class="player-container">
    <!-- Barra de progreso -->
    <ion-range
      [min]="0"
      [max]="duration"
      [value]="currentTime"
      (ionChange)="onSeek($event)"
      class="progress-bar">
    </ion-range>

    <!-- Player Controls -->
    <div class="player-controls">
      <!-- Información de la canción -->
      <div class="song-info">
        <ion-label>
          <h3>{{ currentSong.name }}</h3>
          <p>{{ formatTime(currentTime) }} / {{ formatTime(duration) }}</p>
        </ion-label>
      </div>

      <!-- Botones de control -->
      <div class="control-buttons">
        <ion-button fill="clear" (click)="previous()" [disabled]="currentIndex === 0">
          <ion-icon slot="icon-only" name="play-skip-back-outline"></ion-icon>
        </ion-button>

        <ion-button fill="clear" (click)="togglePlayPause()" class="play-pause-btn">
          <ion-icon slot="icon-only" [name]="isPlaying ? 'pause-outline' : 'play-outline'"></ion-icon>
        </ion-button>

        <ion-button fill="clear" (click)="next()" [disabled]="currentIndex === playlist.length - 1">
          <ion-icon slot="icon-only" name="play-skip-forward-outline"></ion-icon>
        </ion-button>
      </div>
    </div>
  </div>

  <!-- BOTÓN DE FAVORITOS -->
        <ion-button fill="clear" (click)="toggleFavorite()" class="favorite-btn">
          <ion-icon 
            slot="icon-only" 
            [name]="isFavorite() ? 'heart' : 'heart-outline'"
            [class.is-favorite]="isFavorite()">
          </ion-icon>
        </ion-button>
</ion-footer>
